Bootstrap: docker
From: continuumio/miniconda3

%files
    environment.yaml /environment.yaml

%post
    # Update conda
    conda update -n base -c defaults conda -y

    # Create the environment from the environment.yaml file
    conda env create -f /environment.yaml

    # Clean up
    conda clean -a -y

%environment
    # Activate the environment
    source activate myenv

%runscript
    # This is the default command when the container is run
    exec "$@"